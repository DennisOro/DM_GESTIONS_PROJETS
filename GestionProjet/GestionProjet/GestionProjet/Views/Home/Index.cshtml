@{
    ViewBag.Title = "Accueil";
}

@using GestionProjet.Models

@model LogPrUsTskComb

<div class="jumbotron">
    <h1>Pro-manager</h1>
</div>

@using (Html.BeginForm("Index", "Home", FormMethod.Post))
{
    <div class="jumbotron">
        <div class="form-group centerlook">
            <p>
                Nom d'utilisateur: @Html.EditorFor(model => model.Login.UserID)
            </p>

        </div>

        <div class="form-group centerlook">
            <p>
                Mot de passe   : @Html.EditorFor(model => model.Login.Password)
            </p>
        </div>

        <input type="submit" value="Valider" />
        <div>
            @Html.DisplayFor(model => model.Login.Message)
        </div>
    </div>
}

@if (Model.Login.AuthentificationValide == true)
{
    <div>
        <p>Projets</p>
        <table class="table">
            <tr>
                <th>
                    Project Id
                </th>
                <th>
                    Project Name
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.ProjectsList)
            {
                <tr>
                    <td>
                        @item.ProjectId
                    </td>
                    <td>
                        @item.ProjectName
                    </td>
                    <td>
                        @if (Model.Login.Role == "Utilisateur")
                        {
                            <input type="submit" value="Modifier" disabled />
                        }
                        else
                        {
                            <input type="submit" value="Modifier" onclick="window.opren('@Url.Action("Project", "Project", new {projectId=@item.ProjectId, target = "_blank"})')" />
                        }
                    </td>

                </tr>
            }
        </table>
    </div>

    if (Model.Login.Role != "Utilisateur")
    {
        <div>
            <input type="submit" value="Créer un Projet" onclick="window.open('@Url.Action("Project", "Project", new { target="_blank", projectId=0 })')" />
        </div>
    }

    <div>
        <p>Employés</p>
        <table class="table">
            <tr>
                <th>
                    Prenom Employé
                </th>
                <th>
                    Nom Employé
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.UsersList)
            {
                <tr>
                    <td>
                        @item.FirstName
                    </td>
                    <td>
                        @item.LastName
                    </td>
                    <td>
                        @if (Model.Login.Role != "Admin")
                        {
                            <input type="submit" value="Modifier" disabled />
                        }
                        else
                        {
                            <input type="submit" value="Modifier" onclick="window.open('@Url.Action("User", "User", new { target="_blank", firstName = @item.FirstName, lastName = @item.LastName })')" />
                        }
                    </td>
                </tr>
            }
        </table>
    </div>

    <div>
        <p>Tâches</p>
        <table class="table">
            <tr>
                <th>
                    Tâche
                </th>
                <th>
                    Statut
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.TasksList)
            {
                <tr>
                    <td>
                        @item.Description
                    </td>
                    <td>
                        @item.nbHeures
                    </td>
                </tr>
            }
        </table>
    </div>
}
